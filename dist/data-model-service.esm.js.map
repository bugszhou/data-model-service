{"version":3,"file":"data-model-service.esm.js","sources":["../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/inherits.js","../node_modules/@babel/runtime/helpers/classPrivateFieldGet.js","../node_modules/@babel/runtime/helpers/classPrivateFieldSet.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../src/lib/interface.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../src/lib/utils/vaild-data.js","../src/lib/utils/checkModel.js","../src/lib/types/modelConf.js","../src/lib/types/modelSchema.js","../src/lib/index.js"],"sourcesContent":["function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = privateMap.get(receiver);\n\n  if (!descriptor) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n\n  return descriptor.value;\n}\n\nmodule.exports = _classPrivateFieldGet;","function _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = privateMap.get(receiver);\n\n  if (!descriptor) {\n    throw new TypeError(\"attempted to set private field on non-instance\");\n  }\n\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n\n    descriptor.value = value;\n  }\n\n  return value;\n}\n\nmodule.exports = _classPrivateFieldSet;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","/*\n * 不缓存源数据，避免不必要的内存损耗\n */\n\nclass Base {\n  /**\n   * 获取数据模型\n   * @returns {{object}}\n   */\n  getModel() {\n    return {};\n  }\n\n  /**\n   * 缓存解析后的数据\n   * @type {{object}}\n   */\n  parsedData = {};\n\n  /**\n   * 将data转换成数据模型格式的数据\n   * @param data\n   * @param opts 转换配置\n   * @returns {{object}}\n   */\n  parse(data = {}, opts = {}) {\n    return {};\n  }\n\n  /**\n   * 将parse后的数据，反向编译出源数据\n   * @returns {{}}\n   */\n  traverse() {\n    return {};\n  }\n}\n\nexport default Base;\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","import isEmpty from 'lodash.isempty';\nimport isObject from 'lodash.isobject';\nimport isArray from 'lodash.isarray';\nimport toPairs from 'lodash.topairs';\nimport typeOf from 'type-of';\n\n\nfunction error({\n  isPass = false, msg = '', val = '', expectedType = '', keyName = '', oneOf = [],\n} = {}) {\n  return {\n    isPass,\n    reason: {\n      msg,\n      property: keyName,\n      value: val || '',\n      type: typeof val,\n      expected: {\n        type: expectedType,\n        oneOf,\n      },\n    },\n  };\n}\n\nfunction checkFn(data, schema) {\n  const errors = [],\n    passData = [];\n  toPairs(schema).some(([keyName, schemaItem]) => {\n    const originVal = data[keyName];\n    if (typeOf(schemaItem.required) === 'boolean' && !schemaItem.required) {\n      passData.push(error({\n        isPass: true,\n        val: originVal,\n        expectedType: schemaItem.type,\n        keyName,\n        msg: '',\n      }));\n      return false;\n    }\n    if (typeOf(originVal) === 'undefined') {\n      errors.push(error({\n        isPass: false,\n        val: 'undefined',\n        expectedType: schemaItem.type,\n        keyName,\n        msg: `Lose ${keyName}`,\n      }));\n      return true;\n    }\n    if (typeOf(originVal) !== schemaItem.type) {\n      errors.push(error({\n        isPass: false,\n        val: originVal,\n        expectedType: schemaItem.type,\n        keyName,\n        msg: 'type error',\n      }));\n      return true;\n    }\n\n    const { oneOf } = schemaItem;\n    if (isArray(oneOf) && oneOf.length > 0) {\n      if (oneOf.includes(originVal)) {\n        passData.push(error({\n          isPass: true,\n          val: originVal,\n          expectedType: schemaItem.type,\n          keyName,\n          msg: '',\n        }));\n        return false;\n      }\n      errors.push(error({\n        isPass: false,\n        val: originVal,\n        expectedType: schemaItem.type,\n        keyName,\n        msg: `oneOf not found ${originVal}`,\n        oneOf,\n      }));\n      return true;\n    }\n\n    passData.push(error({\n      isPass: true,\n      val: originVal,\n      expectedType: schemaItem.type,\n      keyName,\n      msg: '',\n    }));\n    return false;\n  });\n\n  return { errors, passData };\n}\n\nfunction vaildData(data, schema) {\n  // 检测参数\n  if (!data || !schema) {\n    return error({\n      isPass: false,\n      msg: 'valid-data require 2 args(data & schema)',\n    });\n  }\n\n  if (!isObject(data)) {\n    return error({\n      isPass: false,\n      msg: 'args[0] require object',\n    });\n  }\n\n  if (!isObject(schema) || isArray(schema)) {\n    return error({\n      isPass: false,\n      msg: 'args[1](schema) require object',\n    });\n  }\n\n  if (isEmpty(schema)) {\n    return error({\n      isPass: true,\n      msg: 'args[1](schema) is empty',\n    });\n  }\n\n  if (isArray(data)) {\n    return error({\n      isPass: false,\n      msg: 'args[0](data) require object',\n    });\n  }\n\n  const { errors } = checkFn(data, schema);\n\n  if (errors.length > 0) {\n    return errors.shift();\n  }\n  return {\n    isPass: true,\n    reason: {\n      msg: '',\n      property: '',\n      value: '',\n      type: '',\n      expected: {\n        type: '',\n        oneOf: [],\n      },\n    },\n  };\n}\n\nexport default vaildData;\n","import isObject from 'lodash.isobject';\nimport vaildData from './vaild-data';\n\nexport default function(data, schema) {\n  if (!isObject(data)) {\n    return {\n      isPass: false,\n      reason: {\n        msg: 'args[0] require object',\n        property: '',\n        value: '',\n        type: 'string',\n        expected: {\n          type: '',\n          oneOf: [],\n        },\n      },\n    };\n  }\n\n  let error = null;\n\n  Object.keys(data).some((key) => {\n    const result = vaildData(data[key], schema);\n    if (!result.isPass) {\n      error = result;\n      return true;\n    }\n    return false;\n  });\n\n  if (error) {\n    return error;\n  }\n  return {\n    isPass: true,\n    reason: {\n      msg: '',\n      property: '',\n      value: '',\n      type: '',\n      expected: {\n        type: '',\n        oneOf: [],\n      },\n    },\n  };\n}\n","/*\n * 数据模型配置参数\n */\n/**\n * 基本类型：number string integer boolean object array null\n */\n\n// const demo = {\n//   name: '222',\n//   age: 12,\n//   friends: ['1', '2', '3'],\n//   grade: [{ math: 123 }, { math: 123 }, { math: 123 }],\n//   family: {\n//     dad: '123',\n//     mom: '456'\n//   },\n// };\n//\n// const model = {\n//   name: {\n//     type: 'String',\n//     description: '姓名',\n//     from: 'name',\n//     required: false,\n//   },\n//   friend1: {\n//     type: 'String',\n//     description: '好友1',\n//     from: 'friends[0]',\n//     required: false,\n//   },\n//   grade: {\n//     type: 'array',\n//     description: '成绩列表',\n//     from: 'friends[0]',\n//     required: false,\n//     properties: gradeModel,\n//   },\n//   family: {\n//     type: 'array',\n//     description: '成绩列表',\n//     from: 'family',\n//     required: false,\n//     properties: familyModel,\n//   },\n// };\n\n// 可用类型\nexport const typeEnum = ['string', 'number', 'integer', 'boolean', 'object', 'array', 'null'];\n\nexport default {\n  type: '', // 必填\n  description: '',\n  from: '', // 必填\n  properties: 'none', // 默认none\n  default: '', // 默认值，默认为空字符串\n  required: false, // 默认false\n};\n","import { typeEnum } from './modelConf';\n\nexport default {\n  type: {\n    type: 'string',\n    description: '类型',\n    oneOf: typeEnum,\n    required: true,\n  },\n  description: {\n    type: 'string',\n    description: '描述',\n    required: false,\n  },\n  from: {\n    type: 'string',\n    description: '数据来源',\n    required: true,\n  },\n  properties: {\n    type: 'object',\n    description: '属性',\n    required: false,\n  },\n  default: {\n    type: 'function',\n    description: '默认值',\n    required: false,\n  },\n  required: {\n    type: 'boolean',\n    description: '是否必传',\n    required: false,\n  },\n};","import isObject from 'lodash.isobject';\nimport isEmpty from 'lodash.isempty';\nimport isArray from 'lodash.isarray';\nimport mapValues from 'lodash.mapvalues';\nimport getVal from 'lodash.get';\nimport Base from './interface';\nimport checkModel from './utils/checkModel';\nimport modelSchema from './types/modelSchema';\n\nclass DataModel extends Base{\n  /**\n   * 缓存用户设置的数据模型\n   * @type {{object}}\n   */\n  #model = {};\n\n  constructor(model) {\n    super();\n    this.#init(model);\n  }\n\n  #init(model) {\n    const result = checkModel(model, modelSchema);\n    if (!result.isPass) {\n      throw new Error(result);\n    }\n    this.#setModel(model);\n  }\n\n  #setModel(model) {\n    this.#model = model;\n  }\n\n  getModel() {\n    return this.#model;\n  }\n\n  parse(data = {}) {\n    if (!isObject(data)) {\n      console.error(`data require object`);\n      return this.#parseNotObject();\n    }\n    if (isEmpty(data) && !isArray(data)) {\n      return this.#parseNotObject();\n    }\n    if (isArray(data)) {\n      return this.#parseArray(data);\n    }\n\n    return this.#parseObject(data);\n  }\n\n  #parseObject(data) {\n    console.log(data);\n    return mapValues(this.#model, (schema) => {\n      let firstVal = getVal(data, schema.from, this.#getDefult(schema.default));\n      let val = '';\n      if (schema.from === '.') {\n        val = this.#deepParse(data, schema);\n      } else {\n        if (firstVal === '') {\n          firstVal = this.#getDefult(schema.default);\n        }\n        val = this.#deepParse(firstVal, schema);\n      }\n      if (val === null) {\n        val = this.#getDefult(schema.default);\n      }\n      return this.#formatVal(val, schema.type);\n    });\n  }\n\n  #deepParse(data, schema) {\n    if (schema.type === 'object' || schema.type === 'array') {\n      if (schema.properties) {\n        const tmpDataModel = createDataModel(schema.properties);\n        return tmpDataModel.parse(data);\n      }\n    }\n    return data;\n  }\n\n  #parseArray(data) {\n    if (typeof data[0] === 'undefined') {\n      return data;\n    }\n    if (['number', 'boolean', 'string'].includes(typeof data[0])) {\n      return data;\n    }\n    return data.map((item) => {\n      return this.#parseObject(item);\n    });\n  }\n\n  /**\n   * 获取默认值\n   * @param defaultVal\n   * @returns {*}\n   */\n  #getDefult(defaultVal) {\n    if (typeof defaultVal === 'function') {\n      return defaultVal();\n    }\n\n    if (typeof defaultVal === 'undefined' || defaultVal === null) {\n      return '';\n    }\n\n    return defaultVal;\n  }\n\n  #formatVal(val, expectedType) {\n    const valType = typeof val;\n    if (valType === expectedType) {\n      return val;\n    }\n\n    if (expectedType === 'number') {\n      return Number(val);\n    }\n\n    if (expectedType === 'string') {\n      return `${val}`;\n    }\n\n    if (expectedType === 'boolean') {\n      return !!val;\n    }\n    return val;\n  }\n\n  #parseNotObject() {\n    return mapValues(this.#model, (item) => {\n      let val = this.#getDefult(item.default);\n      return val;\n    });\n  }\n}\n\nexport const MODULE_NAME = 'data-model-service';\n\nexport function createDataModel(model = {}) {\n  return new DataModel(model);\n}\n\nexport default DataModel;\n"],"names":["_typeof","Base","error","isPass","msg","val","expectedType","keyName","oneOf","reason","property","value","type","expected","checkFn","data","schema","errors","passData","toPairs","some","schemaItem","originVal","typeOf","required","push","isArray","length","includes","vaildData","isObject","isEmpty","shift","Object","keys","key","result","typeEnum","description","from","properties","DataModel","model","console","checkModel","modelSchema","Error","log","mapValues","firstVal","getVal","tmpDataModel","createDataModel","parse","map","item","defaultVal","valType","Number"],"mappings":"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"}