{"version":3,"file":"data-model-service.esm.js","sources":["../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/inherits.js","../node_modules/@babel/runtime/helpers/classPrivateFieldGet.js","../node_modules/@babel/runtime/helpers/classPrivateFieldSet.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../src/lib/interface.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../src/lib/utils/vaild-data.js","../src/lib/utils/checkModel.js","../src/lib/types/modelConf.js","../src/lib/types/modelSchema.js","../src/lib/index.js"],"sourcesContent":["function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = privateMap.get(receiver);\n\n  if (!descriptor) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n\n  return descriptor.value;\n}\n\nmodule.exports = _classPrivateFieldGet;","function _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = privateMap.get(receiver);\n\n  if (!descriptor) {\n    throw new TypeError(\"attempted to set private field on non-instance\");\n  }\n\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n\n    descriptor.value = value;\n  }\n\n  return value;\n}\n\nmodule.exports = _classPrivateFieldSet;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","/*\n * 不缓存源数据，避免不必要的内存损耗\n */\n\nclass Base {\n  /**\n   * 获取数据模型\n   * @returns {{object}}\n   */\n  getModel() {\n    return {};\n  }\n\n  /**\n   * 缓存解析后的数据\n   * @type {{object}}\n   */\n  parsedData = {};\n\n  /**\n   * 将data转换成数据模型格式的数据\n   * @param data\n   * @param opts 转换配置\n   * @returns {{object}}\n   */\n  parse(data = {}, opts = {}) {\n    return {};\n  }\n\n  /**\n   * 将parse后的数据，反向编译出源数据\n   * @returns {{}}\n   */\n  traverse() {\n    return {};\n  }\n}\n\nexport default Base;\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","import isEmpty from 'lodash.isempty';\nimport isObject from 'lodash.isobject';\nimport isArray from 'lodash.isarray';\nimport toPairs from 'lodash.topairs';\nimport typeOf from 'type-of';\n\n\nfunction error({\n  isPass = false, msg = '', val = '', expectedType = '', keyName = '', oneOf = [],\n} = {}) {\n  return {\n    isPass,\n    reason: {\n      msg,\n      property: keyName,\n      value: val || '',\n      type: typeof val,\n      expected: {\n        type: expectedType,\n        oneOf,\n      },\n    },\n  };\n}\n\nfunction checkFn(data, schema) {\n  const errors = [],\n    passData = [];\n  toPairs(schema).some(([keyName, schemaItem]) => {\n    const originVal = data[keyName];\n    if (typeOf(schemaItem.required) === 'boolean' && !schemaItem.required) {\n      passData.push(error({\n        isPass: true,\n        val: originVal,\n        expectedType: schemaItem.type,\n        keyName,\n        msg: '',\n      }));\n      return false;\n    }\n    if (typeOf(originVal) === 'undefined') {\n      errors.push(error({\n        isPass: false,\n        val: 'undefined',\n        expectedType: schemaItem.type,\n        keyName,\n        msg: `Lose ${keyName}`,\n      }));\n      return true;\n    }\n    if (typeOf(originVal) !== schemaItem.type) {\n      errors.push(error({\n        isPass: false,\n        val: originVal,\n        expectedType: schemaItem.type,\n        keyName,\n        msg: 'type error',\n      }));\n      return true;\n    }\n\n    const { oneOf } = schemaItem;\n    if (isArray(oneOf) && oneOf.length > 0) {\n      if (oneOf.includes(originVal)) {\n        passData.push(error({\n          isPass: true,\n          val: originVal,\n          expectedType: schemaItem.type,\n          keyName,\n          msg: '',\n        }));\n        return false;\n      }\n      errors.push(error({\n        isPass: false,\n        val: originVal,\n        expectedType: schemaItem.type,\n        keyName,\n        msg: `oneOf not found ${originVal}`,\n        oneOf,\n      }));\n      return true;\n    }\n\n    passData.push(error({\n      isPass: true,\n      val: originVal,\n      expectedType: schemaItem.type,\n      keyName,\n      msg: '',\n    }));\n    return false;\n  });\n\n  return { errors, passData };\n}\n\nfunction vaildData(data, schema) {\n  // 检测参数\n  if (!data || !schema) {\n    return error({\n      isPass: false,\n      msg: 'valid-data require 2 args(data & schema)',\n    });\n  }\n\n  if (!isObject(data)) {\n    return error({\n      isPass: false,\n      msg: 'args[0] require object',\n    });\n  }\n\n  if (!isObject(schema) || isArray(schema)) {\n    return error({\n      isPass: false,\n      msg: 'args[1](schema) require object',\n    });\n  }\n\n  if (isEmpty(schema)) {\n    return error({\n      isPass: true,\n      msg: 'args[1](schema) is empty',\n    });\n  }\n\n  if (isArray(data)) {\n    return error({\n      isPass: false,\n      msg: 'args[0](data) require object',\n    });\n  }\n\n  const { errors } = checkFn(data, schema);\n\n  if (errors.length > 0) {\n    return errors.shift();\n  }\n  return {\n    isPass: true,\n    reason: {\n      msg: '',\n      property: '',\n      value: '',\n      type: '',\n      expected: {\n        type: '',\n        oneOf: [],\n      },\n    },\n  };\n}\n\nexport default vaildData;\n","import isObject from 'lodash.isobject';\nimport vaildData from './vaild-data';\n\nexport default function(data, schema) {\n  if (!isObject(data)) {\n    return {\n      isPass: false,\n      reason: {\n        msg: 'args[0] require object',\n        property: '',\n        value: '',\n        type: 'string',\n        expected: {\n          type: '',\n          oneOf: [],\n        },\n      },\n    };\n  }\n\n  let error = null;\n\n  Object.keys(data).some((key) => {\n    const result = vaildData(data[key], schema);\n    if (!result.isPass) {\n      error = result;\n      return true;\n    }\n    return false;\n  });\n\n  if (error) {\n    return error;\n  }\n  return {\n    isPass: true,\n    reason: {\n      msg: '',\n      property: '',\n      value: '',\n      type: '',\n      expected: {\n        type: '',\n        oneOf: [],\n      },\n    },\n  };\n}\n","/*\n * 数据模型配置参数\n */\n/**\n * 基本类型：number string integer boolean object array null\n */\n\n// const demo = {\n//   name: '222',\n//   age: 12,\n//   friends: ['1', '2', '3'],\n//   grade: [{ math: 123 }, { math: 123 }, { math: 123 }],\n//   family: {\n//     dad: '123',\n//     mom: '456'\n//   },\n// };\n//\n// const model = {\n//   name: {\n//     type: 'String',\n//     description: '姓名',\n//     from: 'name',\n//     required: false,\n//   },\n//   friend1: {\n//     type: 'String',\n//     description: '好友1',\n//     from: 'friends[0]',\n//     required: false,\n//   },\n//   grade: {\n//     type: 'array',\n//     description: '成绩列表',\n//     from: 'friends[0]',\n//     required: false,\n//     properties: gradeModel,\n//   },\n//   family: {\n//     type: 'array',\n//     description: '成绩列表',\n//     from: 'family',\n//     required: false,\n//     properties: familyModel,\n//   },\n// };\n\n// 可用类型\nexport const typeEnum = ['string', 'number', 'integer', 'boolean', 'object', 'array', 'null'];\n\nexport default {\n  type: '', // 必填\n  description: '',\n  from: '', // 必填\n  properties: 'none', // 默认none\n  default: '', // 默认值，默认为空字符串\n  required: false, // 默认false\n};\n","import { typeEnum } from './modelConf';\n\nexport default {\n  type: {\n    type: 'string',\n    description: '类型',\n    oneOf: typeEnum,\n    required: true,\n  },\n  description: {\n    type: 'string',\n    description: '描述',\n    required: false,\n  },\n  from: {\n    type: 'string',\n    description: '数据来源',\n    required: true,\n  },\n  properties: {\n    type: 'object',\n    description: '属性',\n    required: false,\n  },\n  default: {\n    type: 'function',\n    description: '默认值',\n    required: false,\n  },\n  required: {\n    type: 'boolean',\n    description: '是否必传',\n    required: false,\n  },\n};","import isObject from 'lodash.isobject';\nimport isEmpty from 'lodash.isempty';\nimport isArray from 'lodash.isarray';\nimport mapValues from 'lodash.mapvalues';\nimport getVal from 'lodash.get';\nimport Base from './interface';\nimport checkModel from './utils/checkModel';\nimport modelSchema from './types/modelSchema';\n\nclass DataModel extends Base{\n  /**\n   * 缓存用户设置的数据模型\n   * @type {{object}}\n   */\n  #model = {};\n\n  constructor(model) {\n    super();\n    this.#init(model);\n  }\n\n  #init(model) {\n    const result = checkModel(model, modelSchema);\n    if (!result.isPass) {\n      throw new Error(result);\n    }\n    this.#setModel(model);\n  }\n\n  #setModel(model) {\n    this.#model = model;\n  }\n\n  getModel() {\n    return this.#model;\n  }\n\n  parse(data = {}) {\n    if (!isObject(data)) {\n      console.error(`data require object`);\n      return this.#parseNotObject();\n    }\n    if (isEmpty(data) && !isArray(data)) {\n      return this.#parseNotObject();\n    }\n    if (isArray(data)) {\n      return this.#parseArray(data);\n    }\n\n    return this.#parseObject(data);\n  }\n\n  #parseObject(data) {\n    return mapValues(this.#model, (schema) => {\n      let firstVal = getVal(data, schema.from, this.#getDefult(schema.default));\n      if (firstVal === null) {\n        firstVal = this.#getDefult(schema.default);\n      }\n      let val = '';\n      if (schema.from === '.') {\n        val = this.#deepParse(data, schema);\n      } else {\n        if (firstVal === '') {\n          firstVal = this.#getDefult(schema.default);\n        }\n        val = this.#deepParse(firstVal, schema);\n      }\n      if (val === null) {\n        val = this.#getDefult(schema.default);\n      }\n      return this.#formatVal(val, schema.type);\n    });\n  }\n\n  #deepParse(data, schema) {\n    if (schema.type === 'object' || schema.type === 'array') {\n      if (schema.properties) {\n        const tmpDataModel = createDataModel(schema.properties);\n        return tmpDataModel.parse(data);\n      }\n    }\n    return data;\n  }\n\n  #parseArray(data) {\n    if (typeof data[0] === 'undefined') {\n      return data;\n    }\n    if (['number', 'boolean', 'string'].includes(typeof data[0])) {\n      return data;\n    }\n    return data.map((item) => {\n      return this.#parseObject(item);\n    });\n  }\n\n  /**\n   * 获取默认值\n   * @param defaultVal\n   * @returns {*}\n   */\n  #getDefult(defaultVal) {\n    if (typeof defaultVal === 'function') {\n      return defaultVal();\n    }\n\n    if (typeof defaultVal === 'undefined' || defaultVal === null) {\n      return '';\n    }\n\n    return defaultVal;\n  }\n\n  #formatVal(val, expectedType) {\n    const valType = typeof val;\n    if (valType === expectedType) {\n      return val;\n    }\n\n    if (expectedType === 'number') {\n      return Number(val);\n    }\n\n    if (expectedType === 'string') {\n      return `${val}`;\n    }\n\n    if (expectedType === 'boolean') {\n      return !!val;\n    }\n    return val;\n  }\n\n  #parseNotObject() {\n    return mapValues(this.#model, (item) => {\n      let val = this.#getDefult(item.default);\n      return val;\n    });\n  }\n}\n\nexport const MODULE_NAME = 'data-model-service';\n\nexport function createDataModel(model = {}) {\n  return new DataModel(model);\n}\n\nexport default DataModel;\n"],"names":["_typeof","Base","error","isPass","msg","val","expectedType","keyName","oneOf","reason","property","value","type","expected","checkFn","data","schema","errors","passData","toPairs","some","schemaItem","originVal","typeOf","required","push","isArray","length","includes","vaildData","isObject","isEmpty","shift","Object","keys","key","result","typeEnum","description","from","properties","DataModel","model","console","checkModel","modelSchema","Error","mapValues","firstVal","getVal","tmpDataModel","createDataModel","parse","map","item","defaultVal","valType"],"mappings":"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"}