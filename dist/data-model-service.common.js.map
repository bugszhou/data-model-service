{"version":3,"file":"data-model-service.common.js","sources":["../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/inherits.js","../node_modules/@babel/runtime/helpers/classPrivateFieldGet.js","../node_modules/@babel/runtime/helpers/classPrivateFieldSet.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../src/lib/interface.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../src/lib/utils/vaild-data.js","../src/lib/types/modelSchema.js","../src/lib/types/modelConf.js","../src/lib/index.js","../src/lib/utils/checkModel.js"],"sourcesContent":["function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = privateMap.get(receiver);\n\n  if (!descriptor) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n\n  return descriptor.value;\n}\n\nmodule.exports = _classPrivateFieldGet;","function _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = privateMap.get(receiver);\n\n  if (!descriptor) {\n    throw new TypeError(\"attempted to set private field on non-instance\");\n  }\n\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n\n    descriptor.value = value;\n  }\n\n  return value;\n}\n\nmodule.exports = _classPrivateFieldSet;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","/*\n * 不缓存源数据，避免不必要的内存损耗\n */\n\nclass Base {\n  /**\n   * 获取数据模型\n   * @returns {{object}}\n   */\n  getModel() {\n    return {};\n  }\n\n  /**\n   * 缓存解析后的数据\n   * @type {{object}}\n   */\n  parsedData = {};\n\n  /**\n   * 将data转换成数据模型格式的数据\n   * @param data\n   * @param opts 转换配置\n   * @returns {{object}}\n   */\n  parse(data = {}, opts = {}) {\n    return {};\n  }\n\n  /**\n   * 将parse后的数据，反向编译出源数据\n   * @returns {{}}\n   */\n  traverse() {\n    return {};\n  }\n}\n\nexport default Base;\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","import isEmpty from 'lodash.isempty';\nimport isObject from 'lodash.isobject';\nimport isArray from 'lodash.isarray';\nimport toPairs from 'lodash.topairs';\nimport typeOf from 'type-of';\n\n\nfunction error({\n  isPass = false, msg = '', val = '', expectedType = '', keyName = '', oneOf = [],\n} = {}) {\n  return {\n    isPass,\n    reason: {\n      msg,\n      property: keyName,\n      value: val || '',\n      type: typeof val,\n      expected: {\n        type: expectedType,\n        oneOf,\n      },\n    },\n  };\n}\n\nfunction checkFn(data, schema) {\n  const errors = [],\n    passData = [];\n  toPairs(schema).some(([keyName, schemaItem]) => {\n    const originVal = data[keyName];\n    if (typeOf(schemaItem.required) === 'boolean' && !schemaItem.required) {\n      passData.push(error({\n        isPass: true,\n        val: originVal,\n        expectedType: schemaItem.type,\n        keyName,\n        msg: '',\n      }));\n      return false;\n    }\n    if (typeOf(originVal) === 'undefined') {\n      errors.push(error({\n        isPass: false,\n        val: 'undefined',\n        expectedType: schemaItem.type,\n        keyName,\n        msg: `Lose ${keyName}`,\n      }));\n      return true;\n    }\n    if (typeOf(originVal) !== schemaItem.type) {\n      errors.push(error({\n        isPass: false,\n        val: originVal,\n        expectedType: schemaItem.type,\n        keyName,\n        msg: 'type error',\n      }));\n      return true;\n    }\n\n    const { oneOf } = schemaItem;\n    if (isArray(oneOf) && oneOf.length > 0) {\n      if (oneOf.includes(originVal)) {\n        passData.push(error({\n          isPass: true,\n          val: originVal,\n          expectedType: schemaItem.type,\n          keyName,\n          msg: '',\n        }));\n        return false;\n      }\n      errors.push(error({\n        isPass: false,\n        val: originVal,\n        expectedType: schemaItem.type,\n        keyName,\n        msg: `oneOf not found ${originVal}`,\n        oneOf,\n      }));\n      return true;\n    }\n\n    passData.push(error({\n      isPass: true,\n      val: originVal,\n      expectedType: schemaItem.type,\n      keyName,\n      msg: '',\n    }));\n    return false;\n  });\n\n  return { errors, passData };\n}\n\nfunction vaildData(data, schema) {\n  // 检测参数\n  if (!data || !schema) {\n    return error({\n      isPass: false,\n      msg: 'valid-data require 2 args(data & schema)',\n    });\n  }\n\n  if (!isObject(data)) {\n    return error({\n      isPass: false,\n      msg: 'args[0] require object',\n    });\n  }\n\n  if (!isObject(schema) || isArray(schema)) {\n    return error({\n      isPass: false,\n      msg: 'args[1](schema) require object',\n    });\n  }\n\n  if (isEmpty(schema)) {\n    return error({\n      isPass: true,\n      msg: 'args[1](schema) is empty',\n    });\n  }\n\n  if (isArray(data)) {\n    return error({\n      isPass: false,\n      msg: 'args[0](data) require object',\n    });\n  }\n\n  const { errors } = checkFn(data, schema);\n\n  if (errors.length > 0) {\n    return errors.shift();\n  }\n  return {\n    isPass: true,\n    reason: {\n      msg: '',\n      property: '',\n      value: '',\n      type: '',\n      expected: {\n        type: '',\n        oneOf: [],\n      },\n    },\n  };\n}\n\nexport default vaildData;\n","import { typeEnum } from './modelConf';\n\nexport default {\n  type: {\n    type: 'string',\n    description: '类型',\n    oneOf: typeEnum,\n    required: true,\n  },\n  description: {\n    type: 'string',\n    description: '描述',\n    required: false,\n  },\n  from: {\n    type: 'string',\n    description: '数据来源',\n    required: true,\n  },\n  properties: {\n    type: 'object',\n    description: '属性',\n    required: false,\n  },\n  default: {\n    type: 'function',\n    description: '默认值',\n    required: false,\n  },\n  required: {\n    type: 'boolean',\n    description: '是否必传',\n    required: false,\n  },\n};","/*\n * 数据模型配置参数\n */\n/**\n * 基本类型：number string integer boolean object array null\n */\n\n// const demo = {\n//   name: '222',\n//   age: 12,\n//   friends: ['1', '2', '3'],\n//   grade: [{ math: 123 }, { math: 123 }, { math: 123 }],\n//   family: {\n//     dad: '123',\n//     mom: '456'\n//   },\n// };\n//\n// const model = {\n//   name: {\n//     type: 'String',\n//     description: '姓名',\n//     from: 'name',\n//     required: false,\n//   },\n//   friend1: {\n//     type: 'String',\n//     description: '好友1',\n//     from: 'friends[0]',\n//     required: false,\n//   },\n//   grade: {\n//     type: 'array',\n//     description: '成绩列表',\n//     from: 'friends[0]',\n//     required: false,\n//     properties: gradeModel,\n//   },\n//   family: {\n//     type: 'array',\n//     description: '成绩列表',\n//     from: 'family',\n//     required: false,\n//     properties: familyModel,\n//   },\n// };\n\n// 可用类型\nexport const typeEnum = ['string', 'number', 'integer', 'boolean', 'object', 'array', 'null'];\n\nexport default {\n  type: '', // 必填\n  description: '',\n  from: '', // 必填\n  properties: 'none', // 默认none\n  default: '', // 默认值，默认为空字符串\n  required: false, // 默认false\n};\n","import isObject from 'lodash.isobject';\nimport isEmpty from 'lodash.isempty';\nimport isArray from 'lodash.isarray';\nimport mapValues from 'lodash.mapvalues';\nimport getVal from 'lodash.get';\nimport Base from './interface';\nimport checkModel from './utils/checkModel';\nimport modelSchema from './types/modelSchema';\n\nclass DataModel extends Base{\n  /**\n   * 缓存用户设置的数据模型\n   * @type {{object}}\n   */\n  #model = {};\n\n  constructor(model) {\n    super();\n    this.#init(model);\n  }\n\n  #init(model) {\n    const result = checkModel(model, modelSchema);\n    if (!result.isPass) {\n      throw new Error(result);\n    }\n    this.#setModel(model);\n  }\n\n  #setModel(model) {\n    this.#model = model;\n  }\n\n  getModel() {\n    return this.#model;\n  }\n\n  parse(data = {}) {\n    if (!isObject(data)) {\n      console.error(`data require object`);\n      return this.#parseNotObject();\n    }\n    if (isEmpty(data) && !isArray(data)) {\n      return this.#parseNotObject();\n    }\n    if (isArray(data)) {\n      return this.#parseArray(data);\n    }\n\n    return this.#parseObject(data);\n  }\n\n  #parseObject(data) {\n    return mapValues(this.#model, (schema) => {\n      let firstVal = getVal(data, schema.from, this.#getDefult(schema.default));\n      if (firstVal === null) {\n        firstVal = this.#getDefult(schema.default);\n      }\n      let val = '';\n      if (schema.from === '.') {\n        val = this.#deepParse(data, schema);\n      } else {\n        if (firstVal === '') {\n          firstVal = this.#getDefult(schema.default);\n        }\n        val = this.#deepParse(firstVal, schema);\n      }\n      if (val === null) {\n        val = this.#getDefult(schema.default);\n      }\n      return this.#formatVal(val, schema.type);\n    });\n  }\n\n  #deepParse(data, schema) {\n    if (schema.type === 'object' || schema.type === 'array') {\n      if (schema.properties) {\n        const tmpDataModel = createDataModel(schema.properties);\n        return tmpDataModel.parse(data);\n      }\n    }\n    return data;\n  }\n\n  #parseArray(data) {\n    if (typeof data[0] === 'undefined') {\n      return data;\n    }\n    if (['number', 'boolean', 'string'].includes(typeof data[0])) {\n      return data;\n    }\n    return data.map((item) => {\n      return this.#parseObject(item);\n    });\n  }\n\n  /**\n   * 获取默认值\n   * @param defaultVal\n   * @returns {*}\n   */\n  #getDefult(defaultVal) {\n    if (typeof defaultVal === 'function') {\n      return defaultVal();\n    }\n\n    if (typeof defaultVal === 'undefined' || defaultVal === null) {\n      return '';\n    }\n\n    return defaultVal;\n  }\n\n  #formatVal(val, expectedType) {\n    const valType = typeof val;\n    if (valType === expectedType) {\n      return val;\n    }\n\n    if (expectedType === 'number') {\n      return Number(val);\n    }\n\n    if (expectedType === 'string') {\n      return `${val}`;\n    }\n\n    if (expectedType === 'boolean') {\n      return !!val;\n    }\n    return val;\n  }\n\n  #parseNotObject() {\n    return mapValues(this.#model, (item) => {\n      let val = this.#getDefult(item.default);\n      return val;\n    });\n  }\n}\n\nexport const MODULE_NAME = 'data-model-service';\n\nexport function createDataModel(model = {}) {\n  return new DataModel(model);\n}\n\nexport default DataModel;\n","import isObject from 'lodash.isobject';\nimport vaildData from './vaild-data';\n\nexport default function(data, schema) {\n  if (!isObject(data)) {\n    return {\n      isPass: false,\n      reason: {\n        msg: 'args[0] require object',\n        property: '',\n        value: '',\n        type: 'string',\n        expected: {\n          type: '',\n          oneOf: [],\n        },\n      },\n    };\n  }\n\n  let error = null;\n\n  Object.keys(data).some((key) => {\n    const result = vaildData(data[key], schema);\n    if (!result.isPass) {\n      error = result;\n      return true;\n    }\n    return false;\n  });\n\n  if (error) {\n    return error;\n  }\n  return {\n    isPass: true,\n    reason: {\n      msg: '',\n      property: '',\n      value: '',\n      type: '',\n      expected: {\n        type: '',\n        oneOf: [],\n      },\n    },\n  };\n}\n"],"names":["_typeof2","obj","Symbol","iterator","constructor","prototype","_typeof","module","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","self","ReferenceError","call","assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","p","subClass","superClass","create","value","receiver","privateMap","get","set","Base","arr","Array","isArray","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","arrayWithHoles","iterableToArrayLimit","nonIterableRest","error","isPass","msg","val","expectedType","keyName","oneOf","reason","property","type","expected","vaildData","data","schema","isObject","isEmpty","errors","passData","toPairs","some","schemaItem","originVal","typeOf","required","includes","checkFn","shift","description","from","properties","default","DataModel","model","this","console","result","keys","checkModel","modelSchema","Error","_classPrivateMethodGet","mapValues","firstVal","getVal","_this2","createDataModel","parse","map","item","_this3","defaultVal","_this4"],"mappings":"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"}